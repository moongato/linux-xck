From 50e5354d1e4a5ce9d71bf956e78ab0167b46ae0c Mon Sep 17 00:00:00 2001
From: "Jan Alexander Steffens (heftig)" <heftig@archlinux.org>
Date: Fri, 27 Dec 2024 15:08:09 +0100
Subject: [PATCH] drm/amdgpu: Add missing statement in resume_phase3

Fixes: 73dae652dcac776296890da215ee7dec357a1032
See: https://gitlab.freedesktop.org/drm/amd/-/issues/3853#note_2714815
For: https://gitlab.archlinux.org/archlinux/packaging/packages/linux/-/issues/101
---
 drivers/gpu/drm/amd/amdgpu/amdgpu_device.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_device.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_device.c
index 51904906545e59..ad4cd84e40f28d 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_device.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_device.c
@@ -3723,6 +3723,7 @@ static int amdgpu_device_ip_resume_phase3(struct amdgpu_device *adev)
 			r = adev->ip_blocks[i].version->funcs->resume(adev);
 			if (r)
 				return r;
+			adev->ip_blocks[i].status.hw = true;
 		}
 	}
 
